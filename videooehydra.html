<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css'>
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
<style>
@charset "UTF-8";


.containerc {
    position: absolute;
    width: 100%;
    height: 100%;
    background-color: #E0E1E4;
    display: -webkit-box;
    display: -moz-box;
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
}

.containerc-inner {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
}

.video-player-containerc {
    width: 648px;
    height: 350px;
    z-index: 2;
}

.video-containerc {
    height: 310px;
    background-color: black;
}

#media-video {
    width: 100%;
    height: 100%;
    cursor: pointer;
}

.player-containerc {
    height: 40px;
    background-color: #f6f6f6;
}

.play-control,
.volume-control {
    width: 40px;
    height: 40px;
    display: table;
    border-right: 1px solid #dddddd;
    cursor: pointer;
    float: left;
}

.play-button,
.volume-button-mute {
    vertical-align: middle;
    text-align: center;
    display: none;
}

.pause-button,
.volume-button {
    display: table-cell;
    vertical-align: middle;
    text-align: center;
}

.play-control .fa {
    font-size: 0.2em;
}

.volume-control .fa {
    font-size: 0.8em;
}

.indicator {
    width: 100px;
    height: 40px;
    border-right: 1px solid #dddddd;
    font-family: "Open Sans", Arial, Helvetica, sans-serif;
    font-size: 11px;
    text-align: center;
    float: left;
    line-height: 40px;
}

.progress {
    width: 425px;
    height: 40px;
    float: left;
}

.progress-background {
    position: absolute;
    width: 385px;
    height: 1px;
    background-color: black;
    margin-left: 20px;
    margin-top: 20px;
}

.progress-over {
    position: absolute;
    width: 160px;
    height: 1px;
    background-color: #5e9f62;
    margin-left: 20px;
    margin-top: 20px;
}

.progress-hidden {
    position: absolute;
    width: 385px;
    height: 40px;
    margin-left: 20px;
    cursor: pointer;
}

.fullscreen-button {
    width: 40px;
    height: 40px;
    float: right;
    display: table;
    cursor: pointer;
}

.fullscreen-button i {
    display: table-cell;
    text-align: center;
    vertical-align: middle;
    border-left: 1px solid #dddddd;
}


</style>
</head>
<body>
<!-- partial:index.partial.html -->
<div class="containerc">
    <div class="video-player-containerc">
        <div class="video-containerc">
            <video id="media-video">
                <source src="https://senpaiisworking.github.io/code_here/ehydra.mp4" type="video/mp4">
                <source src="https://senpaiisworking.github.io/code_here/ehydra.mp4" type="video/ogg">
            </video>
        </div>
        <div class="player-containerc">
            <div class="play-control">
                <div class="play-button"><i class="fa fa-play"></i></div>
                <div class="pause-button"><i class="fa fa-pause"></i></div>
            </div>
            <div class="volume-control">
                <div class="volume-button"><i class="fa fa-volume-up"></i></div>
                <div class="volume-button-mute"><i class="fa fa-volume-off"></i></div>
            </div>
            <div class="indicator">0:00 / 0:00</div>
            <div class="progress">
                <div class="progress-background"></div>
                <div class="progress-over"></div>
                <div class="progress-hidden"></div>
            </div>
            <div class="fullscreen-button"><i class="fa fa-arrows-alt"></i></div>
        </div>
    </div>
    <div class="containerc-inner"></div>
</div>
<!-- partial -->
  <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script>

var mainFunction =
{
    elements: {
        containerc: ".containerc",
        containercInner: ".containerc-inner",
        videoPlayerContainer: ".video-player-containerc",
        videoContainer: ".video-containerc",
        playerContainer: ".player-containerc",
        mediaVideo: "#media-video",
        playControl: ".play-control",
        playButton: ".play-button",
        pauseButton: ".pause-button",
        volumeControl: ".volume-control",
        volumeButton: ".volume-button",
        volumeButtonMute: ".volume-button-mute",
        progress: ".progress",
        progressOver: ".progress-over",
        progressHidden: ".progress-hidden",
        progressBackground: ".progress-background",
        indicator: ".indicator",
        fullScreenButton: ".fullscreen-button"
    },

    isPlay: false,
    isVolume: true,
    isEnd: false,
    progressBarHeight: 100,

    init: function () {
        mainFunction.defaultSettings();
        mainFunction.clickSettings();
        mainFunction.playControlVideo();
        mainFunction.volumeControlVideo();
        mainFunction.progressControlVideo();
        mainFunction.mouseHideControl();
    },

    defaultSettings: function () {

        $(mainFunction.elements.mediaVideo)[0].controls = false;

        $(window).on("resize", onResize);

        function onResize() {
            $(mainFunction.elements.progress).width($(mainFunction.elements.playerContainer).width() - 223);
            $(mainFunction.elements.progressBackground).width($(mainFunction.elements.playerContainer).width() - 223 - 40);
            $(mainFunction.elements.progressHidden).width($(mainFunction.elements.playerContainer).width() - 223 - 40);
            mainFunction.progressBarHeight = $(mainFunction.elements.playerContainer).width() - 223 - 40;
            $(mainFunction.elements.progressOver).css("width", String((mainFunction.progressBarHeight / $(mainFunction.elements.mediaVideo)[0].duration) * $(mainFunction.elements.mediaVideo)[0].currentTime));
        }

        onResize();

    },

    clickSettings: function () {
        $(mainFunction.elements.playControl).on("click", mainFunction.playControlVideo);
        $(mainFunction.elements.volumeControl).on("click", mainFunction.volumeControlVideo);
        $(mainFunction.elements.mediaVideo).on("click", mainFunction.playControlVideo);
        $(mainFunction.elements.fullScreenButton).on("click", mainFunction.fullScreenControl);
        $("body").on("keyup", function (e) { if (e.which == 27) { mainFunction.exitFullScreen(); } });
    },

    fullScreenControl: function () {

        if (!document.fullscreenElement && !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {
            if (document.documentElement.requestFullscreen) {
                document.documentElement.requestFullscreen();
                mainFunction.onFullScreen();
            }
            else if (document.documentElement.msRequestFullscreen) {
                document.documentElement.msRequestFullscreen();
                mainFunction.onFullScreen();
            }
            else if (document.documentElement.mozRequestFullScreen) {
                document.documentElement.mozRequestFullScreen();
                mainFunction.onFullScreen();
            }
            else if (document.documentElement.webkitRequestFullscreen) {
                document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
                mainFunction.onFullScreen();
            }
        }
        else {
            if (document.exitFullscreen) {
                document.exitFullscreen();
                mainFunction.exitFullScreen();
            }
            else if (document.msExitFullscreen) {
                document.msExitFullscreen();
                mainFunction.exitFullScreen();
            }
            else if (document.mozCancelFullScreen) {
                document.mozCancelFullScreen();
                mainFunction.exitFullScreen();
            }
            else if (document.webkitExitFullscreen) {
                document.webkitExitFullscreen();
                mainFunction.exitFullScreen();
            }
        }
    },

    onFullScreen: function () {

        $(mainFunction.elements.progressOver).css("width", String((mainFunction.progressBarHeight / $(mainFunction.elements.mediaVideo)[0].duration) * $(mainFunction.elements.mediaVideo)[0].currentTime));
        $(mainFunction.elements.containerc).css("display", "block");
        $(mainFunction.elements.videoPlayerContainer).width("100%");
        $(mainFunction.elements.videoPlayerContainer).height("100%");
        $(mainFunction.elements.videoContainer).height("calc(100% - 40px)");
        $(mainFunction.elements.progress).width($(mainFunction.elements.playerContainer).width() - 223);
        $(mainFunction.elements.progressBackground).width($(mainFunction.elements.playerContainer).width() - 223 - 40);
        $(mainFunction.elements.progressHidden).width($(mainFunction.elements.playerContainer).width() - 223 - 40);
        mainFunction.progressBarHeight = $(mainFunction.elements.playerContainer).width() - 223 - 40;
        $(".containerc-inner").css("display", "none");

    },

    exitFullScreen: function () {

        $(mainFunction.elements.containerc).css("display", "-webkit-box");
        $(mainFunction.elements.containerc).css("display", "-moz-box");
        $(mainFunction.elements.containerc).css("display", "-ms-flexbox");
        $(mainFunction.elements.containerc).css("display", "-webkit-flex");
        $(mainFunction.elements.containerc).css("display", "flex");
        $(mainFunction.elements.videoPlayerContainer).width("648");
        $(mainFunction.elements.videoPlayerContainer).height("350");
        $(mainFunction.elements.videoContainer).height("310");
        $(mainFunction.elements.progress).width($(mainFunction.elements.playerContainer).width() - 223);
        $(mainFunction.elements.progressBackground).width($(mainFunction.elements.playerContainer).width() - 223 - 40);
        $(mainFunction.elements.progressHidden).width($(mainFunction.elements.playerContainer).width() - 223 - 40);
        mainFunction.progressBarHeight = $(mainFunction.elements.playerContainer).width() - 223 - 40;
        $(mainFunction.elements.progressOver).css("width", String((mainFunction.progressBarHeight / $(mainFunction.elements.mediaVideo)[0].duration) * $(mainFunction.elements.mediaVideo)[0].currentTime));
        $(".containerc-inner").css("display", "inherit");

    },

    mouseHideControl: function () {

        var mouseHide = setTimeout(onMouseHide, 3000);

        $(mainFunction.elements.containercInner).on("mousemove", function () {

            clearTimeout(mouseHide);

            onMouseShow();

        });

        $(mainFunction.elements.containercInner).on("mousemoveend", function () {

            clearTimeout(mouseHide);

            mouseHide = setTimeout(onMouseHide, 3000);

        });

        function onMouseHide() { $("body").css("cursor", "none"); }

        function onMouseShow() { $("body").css("cursor", "inherit"); }

    },

    playControlVideo: function () {
        if (mainFunction.isPlay) { $(mainFunction.elements.mediaVideo)[0].play(); } else { $(mainFunction.elements.mediaVideo)[0].pause(); }
        $(mainFunction.elements.playButton).css("display", ((mainFunction.isPlay) ? "none" : "table-cell"));
        $(mainFunction.elements.pauseButton).css("display", ((!mainFunction.isPlay) ? "none" : "table-cell"));
        mainFunction.isPlay = !mainFunction.isPlay;
        mainFunction.isEnd = false;
    },

    volumeControlVideo: function () {
        $(mainFunction.elements.mediaVideo)[0].muted = !mainFunction.isVolume;
        $(mainFunction.elements.volumeButtonMute).css("display", ((mainFunction.isVolume) ? "none" : "table-cell"));
        $(mainFunction.elements.volumeButton).css("display", ((!mainFunction.isVolume) ? "none" : "table-cell"));
        mainFunction.isVolume = !mainFunction.isVolume;
    },

    progressControlVideo: function () {

        var mouseX = 0;
        var isDown = false;
        var currentMinute = 0;
        var currentSecond = 0;
        var mediaPlayer = $(mainFunction.elements.mediaVideo)[0];

        mediaPlayer.addEventListener("timeupdate", onProgressVideo, false);

        function onProgressVideo() {
            $(mainFunction.elements.progressOver).css("width", String((mainFunction.progressBarHeight / mediaPlayer.duration) * mediaPlayer.currentTime));
            videoEndControl();
            setIndicator(mediaPlayer.currentTime, mediaPlayer.duration);
        }

        function videoEndControl() {
            if (mediaPlayer.currentTime >= mediaPlayer.duration) {
                mainFunction.isPlay = false;
                mainFunction.playControlVideo();
                mainFunction.isEnd = true;
            }
        }

        function setIndicator(current, duration) {
            var durationMinute = Math.floor(duration / 60);
            var durationSecond = Math.floor(duration - durationMinute * 60);
            var durationLabel = durationMinute + ":" + durationSecond;
            currentSecond = Math.floor(current);
            currentMinute = Math.floor(currentSecond / 60);
            currentSecond = currentSecond - (currentMinute * 60);
            currentSecond = (String(currentSecond).length > 1) ? currentSecond : (String("0") + currentSecond);
            var currentLabel = currentMinute + ":" + currentSecond;
            var indicatorLabel = currentLabel + " / " + durationLabel;
            $(mainFunction.elements.indicator).text(indicatorLabel);
        }

        $(mainFunction.elements.progressHidden).on("mousemove", onProgressHiddenMouseMove);

        function onProgressHiddenMouseMove(e) {
            var parentOffset = $(this).parent().offset();
            mouseX = Math.floor(e.pageX - parentOffset.left - 20);
            if (isDown) { mediaPlayer.currentTime = (mediaPlayer.duration / mainFunction.progressBarHeight) * mouseX; }
        }

        $(mainFunction.elements.progressHidden).on("click", function () { if (!isDown) { mediaPlayer.currentTime = (mediaPlayer.duration / mainFunction.progressBarHeight) * mouseX; } });

        $(mainFunction.elements.progressHidden).on("mousedown", onProgressHiddenMouseDown);

        function onProgressHiddenMouseDown() {

            isDown = true;

            mediaPlayer.currentTime = (mediaPlayer.duration / mainFunction.progressBarHeight) * mouseX;

            $(mainFunction.elements.mediaVideo)[0].pause();
        }

        $(mainFunction.elements.progressHidden).on("mouseup", function () { isDown = false; if (!mainFunction.isEnd) { mainFunction.isPlay = true; mainFunction.playControlVideo(); } });

        $(mainFunction.elements.progressHidden).on("mouseout", function () { isDown = false; if (!mainFunction.isEnd) { mainFunction.isPlay = true; mainFunction.playControlVideo(); } });

    }
};

$(document).on("ready", mainFunction.init);

(function ($) {
    var timeout;
    $(document).on('mousemove', function (event) {
        if (timeout !== undefined) {
            window.clearTimeout(timeout);
        }
        timeout = window.setTimeout(function () {
            $(event.target).trigger('mousemoveend');
        }, 100);
    });
}(jQuery));

</script>
</body>
</html>
